(this["webpackJsonpcms-admin"]=this["webpackJsonpcms-admin"]||[]).push([[6],{114:function(e,t,n){"use strict";n.d(t,"a",(function(){return me})),n.d(t,"c",(function(){return xe}));var a,c=n(0),o=n.n(c),r=n(3),i=n(239),s=n(240),l=n(238),u=n(91),d=n(2),j=Object(l.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),b=function(){var e=j(),t=Object(u.a)(e.paper,e.fixedHeight);return Object(d.jsxs)(i.a,{container:!0,spacing:3,children:[Object(d.jsx)(i.a,{item:!0,xs:12,md:8,lg:9,children:Object(d.jsx)(s.a,{className:t})}),Object(d.jsx)(i.a,{item:!0,xs:12,md:4,lg:3,children:Object(d.jsx)(s.a,{className:t})}),Object(d.jsx)(i.a,{item:!0,xs:12,children:Object(d.jsx)(s.a,{className:e.paper})})]})},O=n(13),p=n(259),f=n(260),h=n(261),m=n(262),x=n(263),v=n(264),g=n(249),C=n(158),y=n.n(C),k=n(95),S=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts"),{method:"GET"}]},w=function(e){var t=Object(c.useMemo)((function(){return S(e)}),[e]);return Object(k.a)(t)},D=n(241),T=n(245),N=n(246),W=n(247),A=n(248),P=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts/").concat(e),{method:"DELETE"}]},U=function(e){var t=Object(c.useMemo)((function(){return e?P(e):void 0}),[e]);return Object(k.a)(t)},E=function(e){var t,n=Object(c.useState)(),o=Object(O.a)(n,2),r=o[0],i=o[1],s=U(r),l=Object(O.a)(s,2),u=l[0],j=l[1];return Object(c.useEffect)((function(){console.log("Delete post: ",u,j,r),u&&u.id===r&&(e.onClose(a.Delete),i(void 0))}),[u,r,j,e]),Object(d.jsxs)(D.a,{open:e.open,onClose:function(){return e.onClose(a.Delete)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(d.jsx)(T.a,{id:"alert-dialog-title",children:"Delete Post"}),Object(d.jsx)(N.a,{children:Object(d.jsxs)(W.a,{id:"alert-dialog-description",children:["Are you sure delete Post ",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.title]})}),Object(d.jsxs)(A.a,{children:[Object(d.jsx)(g.a,{onClick:function(){return e.onClose(a.Delete)},color:"primary",children:"Cancel"}),Object(d.jsx)(g.a,{onClick:function(){var t;i(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)},color:"primary",autoFocus:!0,children:"Confirm"})]})]})},I=n(16),F=n(257),z=n(256),M=n(250),V=n(251),H=n(254),J=n(255),_=n(253),G=n(269),L=n(258),q=n(236),B=n(163),R=n.n(B),Y=n(115),K=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts"),{body:JSON.stringify(e),method:"POST"}]},Q=function(e){var t=Object(c.useMemo)((function(){return K(e)}),[e]);return Object(k.a)(t)},X=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts/").concat(null===e||void 0===e?void 0:e.id),{body:JSON.stringify(e),method:"PUT"}]},Z=function(e){var t=Object(c.useMemo)((function(){return X(e)}),[e]);return Object(k.a)(t)},$=n(111),ee=n(252),te=n(271),ne=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/groups?title=like&title=").concat(e),{method:"GET"}]},ae=function(e){var t=Object(c.useMemo)((function(){return ne(e)}),[e]);return Object(k.a)(t)},ce=function(e){var t=e.post,n=e.control,a=Object(c.useState)(!1),r=Object(O.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)([]),u=Object(O.a)(l,2),j=u[0],b=u[1],p=Object(c.useState)(""),f=Object(O.a)(p,2),h=f[0],m=f[1],x=i&&0===j.length,v=ae(h),g=Object(O.a)(v,2),C=g[0],y=g[1];console.log(y);var k=Object($.a)((function(e,t){console.log("OnInputChange",h,t),h!==t&&(m(t),b(C))}),1500);return Object(d.jsx)("div",{children:Object(d.jsx)(Y.a,{render:function(e){return Object(d.jsx)(te.a,{multiple:!0,id:"groups",open:i,onOpen:function(){return s(!0)},onClose:function(){return s(!1)},loading:x,options:j,value:e.field.value,getOptionSelected:function(e,t){return e.id===t.id},getOptionLabel:function(e){return e.title},onInputChange:k,onChange:function(t,n){return e.field.onChange(n)},renderInput:function(e){return Object(d.jsx)(G.a,Object(I.a)(Object(I.a)({},e),{},{variant:"standard",id:"groups",label:"Groups",type:"groups",placeholder:"",InputProps:Object(I.a)(Object(I.a)({},e.InputProps),{},{endAdornment:Object(d.jsxs)(o.a.Fragment,{children:[x?Object(d.jsx)(ee.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})},defaultValue:null===t||void 0===t?void 0:t.groups,name:"groups",control:n})})},oe=Object(l.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),re=o.a.forwardRef((function(e,t){return Object(d.jsx)(_.a,Object(I.a)({direction:"up",ref:t},e))})),ie=function(e){return e?a.Update:a.Create},se=function(e){var t=Object(Y.b)({shouldUnregister:!1}),n=t.register,a=t.handleSubmit,o=t.watch,r=t.control,i=Object(c.useState)(),s=Object(O.a)(i,2),l=s[0],u=s[1];return console.log(o("title")),Object(d.jsxs)("div",{children:[Object(d.jsxs)("form",{onSubmit:a((function(t){console.log(t),t=Object(I.a)(Object(I.a)({},null===e||void 0===e?void 0:e.data),t),u(t)})),children:[Object(d.jsx)(je,{data:e.data,onClose:e.onClose}),Object(d.jsx)(de,{register:n,post:null===e||void 0===e?void 0:e.data,control:r})]}),l&&((null===e||void 0===e?void 0:e.data)?Object(d.jsx)(ue,{data:l,setData:u,onClose:e.onClose}):Object(d.jsx)(le,{data:l,setData:u,onClose:e.onClose}))]})},le=function(e){var t=e.data,n=e.setData,a=e.onClose,o=Q(t),r=Object(O.a)(o,2),i=r[0],s=r[1];return console.log("Create post: ",i,s),Object(c.useEffect)((function(){i&&(console.log("update post clean data"),a(ie({})),n(void 0))}),[i,n,a]),null},ue=function(e){var t=e.data,n=e.setData,a=e.onClose,o=Z(t),r=Object(O.a)(o,2),i=r[0],s=r[1];return console.log("Update post: ",i,s),Object(c.useEffect)((function(){i&&i.id===(null===t||void 0===t?void 0:t.id)&&(console.log("update post clean data"),a(ie(t)),n(void 0))}),[t,i,n,a]),null},de=function(e){var t=e.register,n=e.post,a=e.control;return Object(d.jsxs)(N.a,{children:[Object(d.jsx)(G.a,Object(I.a)(Object(I.a)({autoFocus:!0,margin:"dense",id:"name",label:"Title",type:"title",fullWidth:!0},t("title")),{},{defaultValue:null===n||void 0===n?void 0:n.title})),Object(d.jsx)(ce,{post:n,control:a}),Object(d.jsx)(Y.a,{render:function(e){var t=e.field;return Object(d.jsx)(G.a,Object(I.a)({margin:"dense",id:"slug",label:"Slug",type:"text",fullWidth:!0},t))},control:a,name:"slug",defaultValue:null===n||void 0===n?void 0:n.slug}),Object(d.jsx)(Y.a,{render:function(e){var t=e.field;return Object(d.jsx)(G.a,Object(I.a)({margin:"dense",id:"content",label:"Content",type:"text",fullWidth:!0,multiline:!0,rows:8},t))},control:a,name:"content",defaultValue:null===n||void 0===n?void 0:n.content})]})},je=function(e){var t=e.data,n=e.onClose,a=oe();return Object(d.jsx)(F.a,{className:a.appBar,children:Object(d.jsxs)(L.a,{children:[Object(d.jsx)(M.a,{edge:"start",color:"inherit",onClick:function(){return n(ie(t))},"aria-label":"close",children:Object(d.jsx)(R.a,{})}),Object(d.jsx)(q.a,{variant:"h6",className:a.title,children:"Post"}),Object(d.jsx)(g.a,{autoFocus:!0,color:"inherit",type:"submit",children:"save"})]})})},be=function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)(D.a,{fullScreen:!0,open:e.open,onClose:function(){return e.onClose(ie(e.data))},TransitionComponent:re,children:[Object(d.jsx)(se,{open:e.open,onClose:function(){return e.onClose(ie(e.data))},data:e.data}),Object(d.jsxs)(V.a,{children:[Object(d.jsx)(H.a,{button:!0,children:Object(d.jsx)(J.a,{primary:"Phone ringtone",secondary:"Titania"})}),Object(d.jsx)(z.a,{}),Object(d.jsx)(H.a,{button:!0,children:Object(d.jsx)(J.a,{primary:"Default notification ringtone",secondary:"Tethys"})})]})]})})},Oe=Object(l.a)({root:{width:"100%"},container:{maxHeight:440}});!function(e){e[e.Delete=0]="Delete",e[e.Update=1]="Update",e[e.Create=2]="Create"}(a||(a={}));var pe=[{id:"id",label:"ID",minWidth:170},{id:"title",label:"Title",minWidth:100},{id:"slug",label:"Slug",minWidth:100},{id:"createAt",label:"Create At",minWidth:100},{id:"updateAt",label:"Update At",minWidth:100},{id:"actions",label:"Actions",minWidth:100}],fe=function(e){var t=e.updated,n=e.handleClickOpen,a=Oe(),c=w(t),o=Object(O.a)(c,2),r=o[0],i=o[1];return null!==i&&console.log(i),Object(d.jsx)(s.a,{className:a.root,children:Object(d.jsx)(p.a,{className:a.container,children:Object(d.jsxs)(f.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(d.jsx)(h.a,{children:Object(d.jsx)(m.a,{children:pe.map((function(e){return Object(d.jsx)(x.a,{style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(d.jsx)(v.a,{children:null!==r?r.map((function(e){return Object(d.jsx)(m.a,{hover:!0,role:"checkbox",tabIndex:-1,children:pe.map((function(t){return Object(d.jsx)(x.a,{children:"actions"===t.id?Object(d.jsx)(he,{handleClickOpen:n,row:e}):y.a.get(e,t.id)},t.id)}))},e.id)})):Object(d.jsx)(m.a,{children:Object(d.jsx)(x.a,{children:"NO Data"},"NO_DATA")})})]})})})},he=function(e){var t=e.handleClickOpen,n=e.row;return Object(d.jsxs)("div",{children:[Object(d.jsx)(g.a,{color:"secondary",variant:"contained",onClick:function(){return t(a.Update,n)},children:"Edit"}),Object(d.jsx)(g.a,{color:"default",variant:"contained",onClick:function(){return t(a.Delete,n)},children:"Delete"})]})},me="/admin",xe=[{path:me,name:"Dashboard",component:b},{path:me+"/post",name:"Post",component:function(){var e=o.a.useState(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],r=o.a.useState(!1),s=Object(O.a)(r,2),l=s[0],u=s[1],j=o.a.useState(!1),b=Object(O.a)(j,2),p=b[0],f=b[1],h=o.a.useState(),m=Object(O.a)(h,2),x=m[0],v=m[1],C=function(e,t){switch(e){case a.Create:case a.Update:c(!0);break;case a.Delete:u(!0)}t&&v(t)},y=function(e){switch(console.log("close dialog"),e){case a.Create:case a.Update:c(!1);break;case a.Delete:u(!1)}v(void 0),f(!p)};return Object(d.jsxs)(i.a,{container:!0,spacing:3,children:[Object(d.jsx)(g.a,{variant:"contained",color:"primary",onClick:function(){return C(a.Create)},children:"Create"}),Object(d.jsx)(be,{open:n,onClose:y,data:x}),Object(d.jsx)(E,{open:l,onClose:y,data:x}),Object(d.jsx)(i.a,{item:!0,xs:12,children:Object(d.jsx)(fe,{updated:p,handleClickOpen:C})})]})}}];t.b=function(){return Object(d.jsx)(r.d,{children:xe.map((function(e,t){var n=e.path,a=e.component;return Object(d.jsx)(r.b,{exact:!0,path:n,component:a},t)}))})}},137:function(e,t,n){"use strict";var a=n(237),c=n(236),o=(n(0),n(2));t.a=function(){return Object(o.jsxs)(c.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(o.jsx)(a.a,{color:"inherit",href:"https://material-ui.com/",children:"CMS Admin"})," ",(new Date).getFullYear(),"."]})}},270:function(e,t,n){"use strict";n.r(t);var a=n(276),c=n(265),o=n(88),r=n(0),i=n(137),s=n(13),l=n(238),u=n(115),d=n(3),j=n(114),b=n(95),O=function(e){return["".concat("https://keycloak-keycloak-zt1983811.cloud.okteto.net","/auth/realms/").concat("golang-cms","/protocol/openid-connect/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:["client_id=".concat("authn-proxy"),"client_secret=".concat("76c7bfb2-1957-4e97-b130-b250538c34d5"),"grant_type=".concat("password"),"username=".concat(e.username),"password=".concat(e.password)].join("&")}]},p=function(e){var t=Object(r.useMemo)((function(){return e?O(e):void 0}),[e]);return Object(b.a)(t)},f=n(30),h=n(16),m=n(269),x=n(2),v=function(e){var t=e.register;return Object(x.jsx)(m.a,Object(h.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Email Address",autoComplete:"username",autoFocus:!0},t("username")))},g=n(277),C=n(194),y=n.n(C),k=n(236),S=Object(l.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),w=function(){var e=S();return Object(x.jsxs)("div",{className:e.paper,children:[Object(x.jsx)(g.a,{className:e.avatar,children:Object(x.jsx)(y.a,{})}),Object(x.jsx)(k.a,{component:"h1",variant:"h5",children:"Sign in"})]})},D=n(274),T=n(267),N=function(e){var t=e.register;return Object(x.jsxs)("div",{children:[Object(x.jsx)(m.a,Object(h.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"current-password"},t("password"))),Object(x.jsx)(T.a,{control:Object(x.jsx)(D.a,{value:"remember",color:"primary"}),label:"Remember me"})]})},W=n(239),A=n(237),P=function(){return Object(x.jsxs)(W.a,{container:!0,children:[Object(x.jsx)(W.a,{item:!0,xs:!0,children:Object(x.jsx)(A.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(x.jsx)(W.a,{item:!0,children:Object(x.jsx)(A.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})},U=n(249),E=n(195),I=n.n(E)()((function(e){return{submit:{margin:e.spacing(3,0,2)}}})),F=function(){var e=I();return Object(x.jsx)(U.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"})},z=Object(l.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)}}})),M=function(){var e=z(),t=Object(r.useState)(),n=Object(s.a)(t,2),a=n[0],c=n[1],o=p(a),i=Object(s.a)(o,2),l=i[0],b=i[1],O=Object(r.useContext)(f.a),h=Object(s.a)(O,2),m=h[0],g=h[1];console.log(l,b);var C=Object(u.b)(),y=C.register,k=C.handleSubmit,S=C.watch;return l?(g(l),Object(x.jsx)(d.a,{to:j.a})):(console.log(S("username")),Object(x.jsxs)("div",{children:[Object(x.jsx)(w,{}),Object(x.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:k((function(e){console.log(e,m),c(e)})),children:[Object(x.jsx)(v,{register:y}),Object(x.jsx)(N,{register:y}),Object(x.jsx)(F,{}),Object(x.jsx)(P,{})]})]}))};t.default=function(){return Object(x.jsxs)(c.a,{component:"main",maxWidth:"xs",children:[Object(x.jsx)(o.a,{}),Object(x.jsx)(M,{}),Object(x.jsx)(a.a,{mt:8,children:Object(x.jsx)(i.a,{})})]})}},95:function(e,t,n){"use strict";var a=n(138),c=n.n(a),o=n(139),r=n(13),i=n(0),s=n(43);t.a=function(e){var t=Object(i.useState)(null),n=Object(r.a)(t,2),a=n[0],l=n[1],u=Object(i.useState)(null),d=Object(r.a)(u,2),j=d[0],b=d[1],O=Object(s.b)();return Object(i.useEffect)((function(){var t=!1;if(void 0!==e)return O(e).then(function(){var e=Object(o.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(!n.ok){e.next=11;break}return e.t0=l,e.next=6,n.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1),b(null),e.next=16;break;case 11:return e.t2=b,e.next=14,n.text();case 14:e.t3=e.sent,(0,e.t2)(e.t3);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){b(e.message)})),function(){t=!0}}),[e,O]),[a,j]}}}]);
//# sourceMappingURL=6.a26b3097.chunk.js.map