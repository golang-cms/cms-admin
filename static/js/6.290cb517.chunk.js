(this["webpackJsonpcms-admin"]=this["webpackJsonpcms-admin"]||[]).push([[6],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return he})),n.d(t,"c",(function(){return fe}));var a,c=n(1),i=n.n(c),r=n(2),o=n(226),s=n(227),l=n(225),d=n(89),u=n(4),j=Object(l.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),b=function(){var e=j(),t=Object(d.a)(e.paper,e.fixedHeight);return Object(u.jsxs)(o.a,{container:!0,spacing:3,children:[Object(u.jsx)(o.a,{item:!0,xs:12,md:8,lg:9,children:Object(u.jsx)(s.a,{className:t})}),Object(u.jsx)(o.a,{item:!0,xs:12,md:4,lg:3,children:Object(u.jsx)(s.a,{className:t})}),Object(u.jsx)(o.a,{item:!0,xs:12,children:Object(u.jsx)(s.a,{className:e.paper})})]})},O=n(32),p=n(244),h=n(245),f=n(246),m=n(247),x=n(248),v=n(249),g=n(235),C=n(152),y=n.n(C),k=n(132),D=n.n(k),w=n(133),S=n(42),N=function(e){var t=Object(c.useState)(null),n=Object(O.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(null),o=Object(O.a)(r,2),s=o[0],l=o[1],d=Object(S.b)();return Object(c.useEffect)((function(){var t=!1;if(void 0!==e)return d(e).then(function(){var e=Object(w.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(!n.ok){e.next=11;break}return e.t0=i,e.next=6,n.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1),l(null),e.next=16;break;case 11:return e.t2=l,e.next=14,n.text();case 14:e.t3=e.sent,(0,e.t2)(e.t3);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){l(e.message)})),function(){t=!0}}),[e,d]),[a,s]},W=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts"),{method:"GET"}]},T=function(e){var t=Object(c.useMemo)((function(){return W(e)}),[e]);return N(t)},U=n(228),A=n(231),E=n(232),F=n(233),P=n(234),M=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts/").concat(e),{method:"DELETE"}]},z=function(e){var t=Object(c.useMemo)((function(){return e?M(e):void 0}),[e]);return N(t)},H=function(e){var t,n=Object(c.useState)(),i=Object(O.a)(n,2),r=i[0],o=i[1],s=z(r),l=Object(O.a)(s,2),d=l[0],j=l[1];return Object(c.useEffect)((function(){console.log("Delete post: ",d,j,r),d&&d.id===r&&(e.onClose(a.Delete),o(void 0))}),[d,r,j,e]),Object(u.jsxs)(U.a,{open:e.open,onClose:function(){return e.onClose(a.Delete)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(u.jsx)(A.a,{id:"alert-dialog-title",children:"Delete Post"}),Object(u.jsx)(E.a,{children:Object(u.jsxs)(F.a,{id:"alert-dialog-description",children:["Are you sure delete Post ",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.title]})}),Object(u.jsxs)(P.a,{children:[Object(u.jsx)(g.a,{onClick:function(){return e.onClose(a.Delete)},color:"primary",children:"Cancel"}),Object(u.jsx)(g.a,{onClick:function(){var t;o(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)},color:"primary",autoFocus:!0,children:"Confirm"})]})]})},I=n(35),J=n(241),V=n(240),q=n(243),B=n(237),L=n(238),R=n(239),G=n(236),Y=n(254),_=n(242),K=n(223),Q=n(156),X=n.n(Q),Z=n(162),$=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts"),{body:JSON.stringify(e),method:"POST"}]},ee=function(e){var t=Object(c.useMemo)((function(){return $(e)}),[e]);return N(t)},te=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts/").concat(null===e||void 0===e?void 0:e.id),{body:JSON.stringify(e),method:"PUT"}]},ne=function(e){var t=Object(c.useMemo)((function(){return te(e)}),[e]);return N(t)},ae=Object(l.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),ce=i.a.forwardRef((function(e,t){return Object(u.jsx)(G.a,Object(I.a)({direction:"up",ref:t},e))})),ie=function(e){return e?a.Update:a.Create},re=function(e){var t=Object(Z.a)({shouldUnregister:!1}),n=t.register,a=t.handleSubmit,i=t.watch,r=Object(c.useState)(),o=Object(O.a)(r,2),s=o[0],l=o[1];return console.log(i("title")),Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:a((function(t){console.log(t),t=Object(I.a)(Object(I.a)({},null===e||void 0===e?void 0:e.data),t),l(t)})),children:[Object(u.jsx)(de,{data:e.data,onClose:e.onClose}),Object(u.jsx)(le,{register:n,post:null===e||void 0===e?void 0:e.data})]}),s&&((null===e||void 0===e?void 0:e.data)?Object(u.jsx)(se,{data:s,setData:l,onClose:e.onClose}):Object(u.jsx)(oe,{data:s,setData:l,onClose:e.onClose}))]})},oe=function(e){var t=e.data,n=e.setData,a=e.onClose,i=ee(t),r=Object(O.a)(i,2),o=r[0],s=r[1];return console.log("Create post: ",o,s),Object(c.useEffect)((function(){o&&(console.log("update post clean data"),a(ie({})),n(void 0))}),[o,n,a]),null},se=function(e){var t=e.data,n=e.setData,a=e.onClose,i=ne(t),r=Object(O.a)(i,2),o=r[0],s=r[1];return console.log("Update post: ",o,s),Object(c.useEffect)((function(){o&&o.id===(null===t||void 0===t?void 0:t.id)&&(console.log("update post clean data"),a(ie(t)),n(void 0))}),[t,o,n,a]),null},le=function(e){var t=e.register,n=e.post;return Object(u.jsxs)(E.a,{children:[Object(u.jsx)(Y.a,Object(I.a)(Object(I.a)({autoFocus:!0,margin:"dense",id:"name",label:"Title",type:"title",fullWidth:!0},t("title")),{},{defaultValue:null===n||void 0===n?void 0:n.title})),Object(u.jsx)(Y.a,Object(I.a)(Object(I.a)({autoFocus:!0,margin:"dense",id:"name",label:"Slug",type:"slug",fullWidth:!0},t("slug")),{},{defaultValue:null===n||void 0===n?void 0:n.slug})),Object(u.jsx)(Y.a,Object(I.a)(Object(I.a)({autoFocus:!0,margin:"dense",id:"name",multiline:!0,rows:8,label:"Content",type:"content",fullWidth:!0},t("content")),{},{defaultValue:null===n||void 0===n?void 0:n.content}))]})},de=function(e){var t=e.data,n=e.onClose,a=ae();return Object(u.jsx)(J.a,{className:a.appBar,children:Object(u.jsxs)(_.a,{children:[Object(u.jsx)(q.a,{edge:"start",color:"inherit",onClick:function(){return n(ie(t))},"aria-label":"close",children:Object(u.jsx)(X.a,{})}),Object(u.jsx)(K.a,{variant:"h6",className:a.title,children:"Post"}),Object(u.jsx)(g.a,{autoFocus:!0,color:"inherit",type:"submit",children:"save"})]})})},ue=function(e){return Object(u.jsx)("div",{children:Object(u.jsxs)(U.a,{fullScreen:!0,open:e.open,onClose:function(){return e.onClose(ie(e.data))},TransitionComponent:ce,children:[Object(u.jsx)(re,{open:e.open,onClose:function(){return e.onClose(ie(e.data))},data:e.data}),Object(u.jsxs)(B.a,{children:[Object(u.jsx)(L.a,{button:!0,children:Object(u.jsx)(R.a,{primary:"Phone ringtone",secondary:"Titania"})}),Object(u.jsx)(V.a,{}),Object(u.jsx)(L.a,{button:!0,children:Object(u.jsx)(R.a,{primary:"Default notification ringtone",secondary:"Tethys"})})]})]})})},je=Object(l.a)({root:{width:"100%"},container:{maxHeight:440}});!function(e){e[e.Delete=0]="Delete",e[e.Update=1]="Update",e[e.Create=2]="Create"}(a||(a={}));var be=[{id:"id",label:"ID",minWidth:170},{id:"title",label:"Title",minWidth:100},{id:"slug",label:"Slug",minWidth:100},{id:"createAt",label:"Create At",minWidth:100},{id:"updateAt",label:"Update At",minWidth:100},{id:"actions",label:"Actions",minWidth:100}],Oe=function(e){var t=e.updated,n=e.handleClickOpen,a=je(),c=T(t),i=Object(O.a)(c,2),r=i[0],o=i[1];return null!==o&&console.log(o),Object(u.jsx)(s.a,{className:a.root,children:Object(u.jsx)(p.a,{className:a.container,children:Object(u.jsxs)(h.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(u.jsx)(f.a,{children:Object(u.jsx)(m.a,{children:be.map((function(e){return Object(u.jsx)(x.a,{style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(u.jsx)(v.a,{children:null!==r?r.map((function(e){return Object(u.jsx)(m.a,{hover:!0,role:"checkbox",tabIndex:-1,children:be.map((function(t){return Object(u.jsx)(x.a,{children:"actions"===t.id?Object(u.jsx)(pe,{handleClickOpen:n,row:e}):y.a.get(e,t.id)},t.id)}))},e.id)})):Object(u.jsx)(m.a,{children:Object(u.jsx)(x.a,{children:"NO Data"},"NO_DATA")})})]})})})},pe=function(e){var t=e.handleClickOpen,n=e.row;return Object(u.jsxs)("div",{children:[Object(u.jsx)(g.a,{color:"secondary",variant:"contained",onClick:function(){return t(a.Update,n)},children:"Edit"}),Object(u.jsx)(g.a,{color:"default",variant:"contained",onClick:function(){return t(a.Delete,n)},children:"Delete"})]})},he="/admin",fe=[{path:he,name:"Dashboard",component:b},{path:he+"/post",name:"Post",component:function(){var e=i.a.useState(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],r=i.a.useState(!1),s=Object(O.a)(r,2),l=s[0],d=s[1],j=i.a.useState(!1),b=Object(O.a)(j,2),p=b[0],h=b[1],f=i.a.useState(),m=Object(O.a)(f,2),x=m[0],v=m[1],C=function(e,t){switch(e){case a.Create:case a.Update:c(!0);break;case a.Delete:d(!0)}t&&v(t)},y=function(e){switch(console.log("close dialog"),e){case a.Create:case a.Update:c(!1);break;case a.Delete:d(!1)}v(void 0),h(!p)};return Object(u.jsxs)(o.a,{container:!0,spacing:3,children:[Object(u.jsx)(g.a,{variant:"contained",color:"primary",onClick:function(){return C(a.Create)},children:"Create"}),Object(u.jsx)(ue,{open:n,onClose:y,data:x}),Object(u.jsx)(H,{open:l,onClose:y,data:x}),Object(u.jsx)(o.a,{item:!0,xs:12,children:Object(u.jsx)(Oe,{updated:p,handleClickOpen:C})})]})}}];t.b=function(){return Object(u.jsx)(r.c,{children:fe.map((function(e,t){var n=e.path,a=e.component;return Object(u.jsx)(r.a,{exact:!0,path:n,component:a},t)}))})}},131:function(e,t,n){"use strict";var a=n(224),c=n(223),i=(n(1),n(4));t.a=function(){return Object(i.jsxs)(c.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(i.jsx)(a.a,{color:"inherit",href:"https://material-ui.com/",children:"CMS Admin"})," ",(new Date).getFullYear(),"."]})}},256:function(e,t,n){"use strict";n.r(t);var a=n(260),c=n(250),i=n(86),r=(n(1),n(131)),o=n(225),s=n(254),l=n(4),d=function(){return Object(l.jsx)(s.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0})},u=n(261),j=n(183),b=n.n(j),O=n(223),p=Object(o.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),h=function(){var e=p();return Object(l.jsxs)("div",{className:e.paper,children:[Object(l.jsx)(u.a,{className:e.avatar,children:Object(l.jsx)(b.a,{})}),Object(l.jsx)(O.a,{component:"h1",variant:"h5",children:"Sign in"})]})},f=n(259),m=n(252),x=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(s.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(l.jsx)(m.a,{control:Object(l.jsx)(f.a,{value:"remember",color:"primary"}),label:"Remember me"})]})},v=n(226),g=n(224),C=function(){return Object(l.jsxs)(v.a,{container:!0,children:[Object(l.jsx)(v.a,{item:!0,xs:!0,children:Object(l.jsx)(g.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(l.jsx)(v.a,{item:!0,children:Object(l.jsx)(g.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})},y=n(235),k=n(184),D=n.n(k),w=n(109),S=D()((function(e){return{submit:{margin:e.spacing(3,0,2)}}})),N=function(){var e=S();return Object(l.jsx)(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,href:w.a,children:"Sign In"})},W=Object(o.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)}}})),T=function(){var e=W();return Object(l.jsxs)("div",{children:[Object(l.jsx)(h,{}),Object(l.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(l.jsx)(d,{}),Object(l.jsx)(x,{}),Object(l.jsx)(N,{}),Object(l.jsx)(C,{})]})]})};t.default=function(){return Object(l.jsxs)(c.a,{component:"main",maxWidth:"xs",children:[Object(l.jsx)(i.a,{}),Object(l.jsx)(T,{}),Object(l.jsx)(a.a,{mt:8,children:Object(l.jsx)(r.a,{})})]})}}}]);
//# sourceMappingURL=6.290cb517.chunk.js.map