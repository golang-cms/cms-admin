(this["webpackJsonpcms-admin"]=this["webpackJsonpcms-admin"]||[]).push([[6],{114:function(e,t,n){"use strict";n.d(t,"a",(function(){return fe})),n.d(t,"c",(function(){return xe}));var a,c=n(0),o=n.n(c),r=n(3),i=n(239),s=n(240),l=n(238),u=n(91),d=n(2),j=Object(l.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),b=function(){var e=j(),t=Object(u.a)(e.paper,e.fixedHeight);return Object(d.jsxs)(i.a,{container:!0,spacing:3,children:[Object(d.jsx)(i.a,{item:!0,xs:12,md:8,lg:9,children:Object(d.jsx)(s.a,{className:t})}),Object(d.jsx)(i.a,{item:!0,xs:12,md:4,lg:3,children:Object(d.jsx)(s.a,{className:t})}),Object(d.jsx)(i.a,{item:!0,xs:12,children:Object(d.jsx)(s.a,{className:e.paper})})]})},O=n(13),p=n(259),h=n(260),m=n(261),f=n(262),x=n(263),v=n(264),g=n(249),C=n(158),_=n.n(C),S=n(95),E=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts"),{method:"GET"}]},T=function(e){var t=Object(c.useMemo)((function(){return E(e)}),[e]);return Object(S.a)(t)},A=n(241),P=n(245),D=n(246),y=n(247),k=n(248),N=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts/").concat(e),{method:"DELETE"}]},R=function(e){var t=Object(c.useMemo)((function(){return e?N(e):void 0}),[e]);return Object(S.a)(t)},W=function(e){var t,n=Object(c.useState)(),o=Object(O.a)(n,2),r=o[0],i=o[1],s=R(r),l=Object(O.a)(s,2),u=l[0],j=l[1];return Object(c.useEffect)((function(){console.log("Delete post: ",u,j,r),u&&u.id===r&&(e.onClose(a.Delete),i(void 0))}),[u,r,j,e]),Object(d.jsxs)(A.a,{open:e.open,onClose:function(){return e.onClose(a.Delete)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(d.jsx)(P.a,{id:"alert-dialog-title",children:"Delete Post"}),Object(d.jsx)(D.a,{children:Object(d.jsxs)(y.a,{id:"alert-dialog-description",children:["Are you sure delete Post ",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.title]})}),Object(d.jsxs)(k.a,{children:[Object(d.jsx)(g.a,{onClick:function(){return e.onClose(a.Delete)},color:"primary",children:"Cancel"}),Object(d.jsx)(g.a,{onClick:function(){var t;i(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)},color:"primary",autoFocus:!0,children:"Confirm"})]})]})},w=n(16),I=n(257),U=n(256),L=n(250),K=n(251),F=n(254),H=n(255),B=n(253),z=n(269),V=n(258),M=n(236),Y=n(163),G=n.n(Y),J=n(115),q=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts"),{body:JSON.stringify(e),method:"POST"}]},Q=function(e){var t=Object(c.useMemo)((function(){return q(e)}),[e]);return Object(S.a)(t)},X=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/posts/").concat(null===e||void 0===e?void 0:e.id),{body:JSON.stringify(e),method:"PUT"}]},Z=function(e){var t=Object(c.useMemo)((function(){return X(e)}),[e]);return Object(S.a)(t)},$=n(111),ee=n(252),te=n(271),ne=function(e){return["".concat("https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1","/groups?title=like&title=").concat(e),{method:"GET"}]},ae=function(e){var t=Object(c.useMemo)((function(){return ne(e)}),[e]);return Object(S.a)(t)},ce=function(e){var t=e.post,n=e.control,a=Object(c.useState)(!1),r=Object(O.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)([]),u=Object(O.a)(l,2),j=u[0],b=u[1],p=Object(c.useState)(""),h=Object(O.a)(p,2),m=h[0],f=h[1],x=i&&0===j.length,v=ae(m),g=Object(O.a)(v,2),C=g[0],_=g[1];console.log(_);var S=Object($.a)((function(e,t){console.log("OnInputChange",m,t),m!==t&&(f(t),b(C))}),1500);return Object(d.jsx)("div",{children:Object(d.jsx)(J.a,{render:function(e){return Object(d.jsx)(te.a,{multiple:!0,id:"groups",open:i,onOpen:function(){return s(!0)},onClose:function(){return s(!1)},loading:x,options:j,value:e.field.value,getOptionSelected:function(e,t){return e.id===t.id},getOptionLabel:function(e){return e.title},onInputChange:S,onChange:function(t,n){return e.field.onChange(n)},renderInput:function(e){return Object(d.jsx)(z.a,Object(w.a)(Object(w.a)({},e),{},{variant:"standard",id:"groups",label:"Groups",type:"groups",placeholder:"",InputProps:Object(w.a)(Object(w.a)({},e.InputProps),{},{endAdornment:Object(d.jsxs)(o.a.Fragment,{children:[x?Object(d.jsx)(ee.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}})},defaultValue:null===t||void 0===t?void 0:t.groups,name:"groups",control:n})})},oe=Object(l.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),re=o.a.forwardRef((function(e,t){return Object(d.jsx)(B.a,Object(w.a)({direction:"up",ref:t},e))})),ie=function(e){return e?a.Update:a.Create},se=function(e){var t=Object(J.b)({shouldUnregister:!1}),n=t.register,a=t.handleSubmit,o=t.watch,r=t.control,i=Object(c.useState)(),s=Object(O.a)(i,2),l=s[0],u=s[1];return console.log(o("title")),Object(d.jsxs)("div",{children:[Object(d.jsxs)("form",{onSubmit:a((function(t){console.log(t),t=Object(w.a)(Object(w.a)({},null===e||void 0===e?void 0:e.data),t),u(t)})),children:[Object(d.jsx)(je,{data:e.data,onClose:e.onClose}),Object(d.jsx)(de,{register:n,post:null===e||void 0===e?void 0:e.data,control:r})]}),l&&((null===e||void 0===e?void 0:e.data)?Object(d.jsx)(ue,{data:l,setData:u,onClose:e.onClose}):Object(d.jsx)(le,{data:l,setData:u,onClose:e.onClose}))]})},le=function(e){var t=e.data,n=e.setData,a=e.onClose,o=Q(t),r=Object(O.a)(o,2),i=r[0],s=r[1];return console.log("Create post: ",i,s),Object(c.useEffect)((function(){i&&(console.log("update post clean data"),a(ie({})),n(void 0))}),[i,n,a]),null},ue=function(e){var t=e.data,n=e.setData,a=e.onClose,o=Z(t),r=Object(O.a)(o,2),i=r[0],s=r[1];return console.log("Update post: ",i,s),Object(c.useEffect)((function(){i&&i.id===(null===t||void 0===t?void 0:t.id)&&(console.log("update post clean data"),a(ie(t)),n(void 0))}),[t,i,n,a]),null},de=function(e){var t=e.register,n=e.post,a=e.control;return Object(d.jsxs)(D.a,{children:[Object(d.jsx)(z.a,Object(w.a)(Object(w.a)({autoFocus:!0,margin:"dense",id:"name",label:"Title",type:"title",fullWidth:!0},t("title")),{},{defaultValue:null===n||void 0===n?void 0:n.title})),Object(d.jsx)(ce,{post:n,control:a}),Object(d.jsx)(J.a,{render:function(e){var t=e.field;return Object(d.jsx)(z.a,Object(w.a)({margin:"dense",id:"slug",label:"Slug",type:"text",fullWidth:!0},t))},control:a,name:"slug",defaultValue:null===n||void 0===n?void 0:n.slug}),Object(d.jsx)(J.a,{render:function(e){var t=e.field;return Object(d.jsx)(z.a,Object(w.a)({margin:"dense",id:"content",label:"Content",type:"text",fullWidth:!0,multiline:!0,rows:8},t))},control:a,name:"content",defaultValue:null===n||void 0===n?void 0:n.content})]})},je=function(e){var t=e.data,n=e.onClose,a=oe();return Object(d.jsx)(I.a,{className:a.appBar,children:Object(d.jsxs)(V.a,{children:[Object(d.jsx)(L.a,{edge:"start",color:"inherit",onClick:function(){return n(ie(t))},"aria-label":"close",children:Object(d.jsx)(G.a,{})}),Object(d.jsx)(M.a,{variant:"h6",className:a.title,children:"Post"}),Object(d.jsx)(g.a,{autoFocus:!0,color:"inherit",type:"submit",children:"save"})]})})},be=function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)(A.a,{fullScreen:!0,open:e.open,onClose:function(){return e.onClose(ie(e.data))},TransitionComponent:re,children:[Object(d.jsx)(se,{open:e.open,onClose:function(){return e.onClose(ie(e.data))},data:e.data}),Object(d.jsxs)(K.a,{children:[Object(d.jsx)(F.a,{button:!0,children:Object(d.jsx)(H.a,{primary:"Phone ringtone",secondary:"Titania"})}),Object(d.jsx)(U.a,{}),Object(d.jsx)(F.a,{button:!0,children:Object(d.jsx)(H.a,{primary:"Default notification ringtone",secondary:"Tethys"})})]})]})})},Oe=Object(l.a)({root:{width:"100%"},container:{maxHeight:440}});!function(e){e[e.Delete=0]="Delete",e[e.Update=1]="Update",e[e.Create=2]="Create"}(a||(a={}));var pe=[{id:"id",label:"ID",minWidth:170},{id:"title",label:"Title",minWidth:100},{id:"slug",label:"Slug",minWidth:100},{id:"createAt",label:"Create At",minWidth:100},{id:"updateAt",label:"Update At",minWidth:100},{id:"actions",label:"Actions",minWidth:100}],he=function(e){var t=e.updated,n=e.handleClickOpen,a=Oe(),c=T(t),o=Object(O.a)(c,2),r=o[0],i=o[1];return null!==i&&console.log(i),Object(d.jsx)(s.a,{className:a.root,children:Object(d.jsx)(p.a,{className:a.container,children:Object(d.jsxs)(h.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(d.jsx)(m.a,{children:Object(d.jsx)(f.a,{children:pe.map((function(e){return Object(d.jsx)(x.a,{style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(d.jsx)(v.a,{children:null!==r?r.map((function(e){return Object(d.jsx)(f.a,{hover:!0,role:"checkbox",tabIndex:-1,children:pe.map((function(t){return Object(d.jsx)(x.a,{children:"actions"===t.id?Object(d.jsx)(me,{handleClickOpen:n,row:e}):_.a.get(e,t.id)},t.id)}))},e.id)})):Object(d.jsx)(f.a,{children:Object(d.jsx)(x.a,{children:"NO Data"},"NO_DATA")})})]})})})},me=function(e){var t=e.handleClickOpen,n=e.row;return Object(d.jsxs)("div",{children:[Object(d.jsx)(g.a,{color:"secondary",variant:"contained",onClick:function(){return t(a.Update,n)},children:"Edit"}),Object(d.jsx)(g.a,{color:"default",variant:"contained",onClick:function(){return t(a.Delete,n)},children:"Delete"})]})},fe="/admin",xe=[{path:fe,name:"Dashboard",component:b},{path:fe+"/post",name:"Post",component:function(){var e=o.a.useState(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],r=o.a.useState(!1),s=Object(O.a)(r,2),l=s[0],u=s[1],j=o.a.useState(!1),b=Object(O.a)(j,2),p=b[0],h=b[1],m=o.a.useState(),f=Object(O.a)(m,2),x=f[0],v=f[1],C=function(e,t){switch(e){case a.Create:case a.Update:c(!0);break;case a.Delete:u(!0)}t&&v(t)},_=function(e){switch(console.log("close dialog"),e){case a.Create:case a.Update:c(!1);break;case a.Delete:u(!1)}v(void 0),h(!p)};return Object(d.jsxs)(i.a,{container:!0,spacing:3,children:[Object(d.jsx)(g.a,{variant:"contained",color:"primary",onClick:function(){return C(a.Create)},children:"Create"}),Object(d.jsx)(be,{open:n,onClose:_,data:x}),Object(d.jsx)(W,{open:l,onClose:_,data:x}),Object(d.jsx)(i.a,{item:!0,xs:12,children:Object(d.jsx)(he,{updated:p,handleClickOpen:C})})]})}}];t.b=function(){return Object(d.jsx)(r.d,{children:xe.map((function(e,t){var n=e.path,a=e.component;return Object(d.jsx)(r.b,{exact:!0,path:n,component:a},t)}))})}},137:function(e,t,n){"use strict";var a=n(237),c=n(236),o=(n(0),n(2));t.a=function(){return Object(o.jsxs)(c.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(o.jsx)(a.a,{color:"inherit",href:"https://material-ui.com/",children:"CMS Admin"})," ",(new Date).getFullYear(),"."]})}},270:function(e,t,n){"use strict";n.r(t);var a=n(276),c=n(265),o=n(88),r=n(0),i=n(137),s=n(13),l=n(238),u=n(115),d=n(3),j=n(114),b=n(95),O=function(e){return["".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CONTENT_API_BASE_URL:"https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1"}).REACT_APP_KEYCLOAK_API_BASE_URL,"/auth/realms/golang-cms/protocol/openid-connect/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:["client_id=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CONTENT_API_BASE_URL:"https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1"}).REACT_APP_KEYCLOAK_API_CLIENT_ID),"client_secret=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CONTENT_API_BASE_URL:"https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1"}).REACT_APP_KEYCLOAK_API_CLIENT_SECRET),"grant_type=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CONTENT_API_BASE_URL:"https://cms-api-content-api-cms-zt1983811.cloud.okteto.net/v1"}).REACT_APP_KEYCLOAK_API_GRANT_TYPE_PASSWORD),"username=".concat(e.username),"password=".concat(e.password)].join("&")}]},p=function(e){var t=Object(r.useMemo)((function(){return e?O(e):void 0}),[e]);return Object(b.a)(t)},h=n(30),m=n(16),f=n(269),x=n(2),v=function(e){var t=e.register;return Object(x.jsx)(f.a,Object(m.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Email Address",autoComplete:"username",autoFocus:!0},t("username")))},g=n(277),C=n(194),_=n.n(C),S=n(236),E=Object(l.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}}})),T=function(){var e=E();return Object(x.jsxs)("div",{className:e.paper,children:[Object(x.jsx)(g.a,{className:e.avatar,children:Object(x.jsx)(_.a,{})}),Object(x.jsx)(S.a,{component:"h1",variant:"h5",children:"Sign in"})]})},A=n(274),P=n(267),D=function(e){var t=e.register;return Object(x.jsxs)("div",{children:[Object(x.jsx)(f.a,Object(m.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"current-password"},t("password"))),Object(x.jsx)(P.a,{control:Object(x.jsx)(A.a,{value:"remember",color:"primary"}),label:"Remember me"})]})},y=n(239),k=n(237),N=function(){return Object(x.jsxs)(y.a,{container:!0,children:[Object(x.jsx)(y.a,{item:!0,xs:!0,children:Object(x.jsx)(k.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(x.jsx)(y.a,{item:!0,children:Object(x.jsx)(k.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})},R=n(249),W=n(195),w=n.n(W)()((function(e){return{submit:{margin:e.spacing(3,0,2)}}})),I=function(){var e=w();return Object(x.jsx)(R.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"})},U=Object(l.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)}}})),L=function(){var e=U(),t=Object(r.useState)(),n=Object(s.a)(t,2),a=n[0],c=n[1],o=p(a),i=Object(s.a)(o,2),l=i[0],b=i[1],O=Object(r.useContext)(h.a),m=Object(s.a)(O,2),f=m[0],g=m[1];console.log(l,b);var C=Object(u.b)(),_=C.register,S=C.handleSubmit,E=C.watch;return l?(g(l),Object(x.jsx)(d.a,{to:j.a})):(console.log(E("username")),Object(x.jsxs)("div",{children:[Object(x.jsx)(T,{}),Object(x.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:S((function(e){console.log(e,f),c(e)})),children:[Object(x.jsx)(v,{register:_}),Object(x.jsx)(D,{register:_}),Object(x.jsx)(I,{}),Object(x.jsx)(N,{})]})]}))};t.default=function(){return Object(x.jsxs)(c.a,{component:"main",maxWidth:"xs",children:[Object(x.jsx)(o.a,{}),Object(x.jsx)(L,{}),Object(x.jsx)(a.a,{mt:8,children:Object(x.jsx)(i.a,{})})]})}},95:function(e,t,n){"use strict";var a=n(138),c=n.n(a),o=n(139),r=n(13),i=n(0),s=n(43);t.a=function(e){var t=Object(i.useState)(null),n=Object(r.a)(t,2),a=n[0],l=n[1],u=Object(i.useState)(null),d=Object(r.a)(u,2),j=d[0],b=d[1],O=Object(s.b)();return Object(i.useEffect)((function(){var t=!1;if(void 0!==e)return O(e).then(function(){var e=Object(o.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(!n.ok){e.next=11;break}return e.t0=l,e.next=6,n.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1),b(null),e.next=16;break;case 11:return e.t2=b,e.next=14,n.text();case 14:e.t3=e.sent,(0,e.t2)(e.t3);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){b(e.message)})),function(){t=!0}}),[e,O]),[a,j]}}}]);
//# sourceMappingURL=6.9a118c62.chunk.js.map